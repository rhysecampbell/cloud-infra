/*!
 * Copyright Ben Olson (https://github.com/bseth99/jquery-ui-extensions)
 * jQuery UI ComboBox @VERSION
 *
 *  Adapted from Jï¿½rn Zaefferer original implementation at
 *  http://www.learningjquery.com/2010/06/a-jquery-ui-combobox-under-the-hood
 *
 *  And the demo at
 *  http://jqueryui.com/autocomplete/#combobox
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 *
 */
(function(a,b){a.widget("ui.combobox",{version:"@VERSION",widgetEventPrefix:"combobox",uiCombo:null,uiInput:null,_wasOpen:false,_create:function(){var e=this,c=this.element.hide(),d,f;d=this.uiInput=a("<input />").insertAfter(c).addClass("ui-widget ui-widget-content ui-corner-left ui-combobox-input").val(c.children(":selected").text());f=this.uiCombo=d.wrap("<span>").parent().addClass("ui-combobox").insertAfter(c);d.autocomplete({delay:0,minLength:0,appendTo:f,source:a.proxy(this,"_linkSelectList")});a("<button>").attr("tabIndex",-1).attr("type","button").insertAfter(d).button({icons:{primary:"ui-icon-triangle-1-s"},text:false}).removeClass("ui-corner-all").addClass("ui-corner-right ui-button-icon ui-combobox-button");d.data("ui-autocomplete")._renderItem=function(g,h){return a("<li>").append(a("<a>").html(h.label)).appendTo(g)};this._on(this._events)},_linkSelectList:function(d,c){var e=new RegExp(a.ui.autocomplete.escapeRegex(d.term),"i");c(this.element.children("option").map(function(){var f=a(this).text();if(this.value&&(!d.term||e.test(f))){return{label:f.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+a.ui.autocomplete.escapeRegex(d.term)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>"),value:f,option:this}}}))},_events:{"autocompletechange input":function(e,f){var c=a(e.currentTarget);if(!f.item){var g=new RegExp("^"+a.ui.autocomplete.escapeRegex(c.val())+"$","i"),d=false;this.element.children("option").each(function(){if(a(this).text().match(g)){this.selected=d=true;return false}});if(!d){c.val("");this.element.prop("selectedIndex",-1)}}this._trigger("change",e,{item:f.item?f.item.option:null})},"autocompleteselect input":function(c,d){d.item.option.selected=true;this._trigger("select",c,{item:d.item.option})},"autocompleteopen input":function(c,d){this.uiCombo.children(".ui-autocomplete").outerWidth(this.uiCombo.outerWidth(true))},"mousedown .ui-combobox-button":function(c){this._wasOpen=this.uiInput.autocomplete("widget").is(":visible")},"click .ui-combobox-button":function(c){this.uiInput.focus();if(this._wasOpen){return}this.uiInput.autocomplete("search","")}},value:function(d){var c=this.element,f=false,e;if(!arguments.length){e=c.children(":selected");return e.length>0?e.val():null}c.prop("selectedIndex",-1);c.children("option").each(function(){if(this.value==d){this.selected=f=true;return false}});if(f){this.uiInput.val(c.children(":selected").text())}else{this.uiInput.val("");this.element.prop("selectedIndex",-1)}},_destroy:function(){this.element.show();this.uiCombo.replaceWith(this.element)},widget:function(){return this.uiCombo},_getCreateEventData:function(){return{select:this.element,combo:this.uiCombo,input:this.uiInput}}})}(jQuery));