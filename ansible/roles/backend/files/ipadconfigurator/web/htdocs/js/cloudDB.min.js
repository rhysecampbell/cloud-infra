$(document).ready(function(){$("#mainBar").menubar({position:{within:$("#menubarDiv").add(window).first()},select:function(a,b){$(".selected",this).removeClass("selected");b.item.addClass("selected")}});$("#mainBar").find('a[href="'+window.location.pathname+'"]').addClass("ui-state-active");updateClock();setInterval("updateClock()",1000)});function stationList(c){console.log("info: siteSearch");var b={};b.stationID=configInt.cache.stationID.val();b.xmlName=configInt.cache.xmlName.val();if(c!="metar"){b.regionID=configInt.cache.regionID.val()}b.vRegion=configInt.cache.vRegion.val();var d=function(e,h,g){configInt.cache.stationDiv.html('<select id="stationList" title="Station List" multiple="multiple" size="10" style="width:550px; height:300px;"></select>');for(var f in e){$("#stationList").append('<option selected="selected" value='+e[f]["stn_id"]+">"+e[f]["xml_target_name"]+" ("+e[f]["station_name"]+")</option>")}$("#stationList").multiselect();configInt.cache.mapStations.attr("disabled",false);configInt.cache.unmapStations.attr("disabled",false)};URLstring="/get/stationList";if(c=="metar"){URLstring="/getMetar/stationList"}var a={};a.url=configInt.settings.baseURL+URLstring;a.data=b;a.success=d;return restCall(a);return}function virtualRegionMap(c){console.log("info: virtualRegionMap");var b={};b.stationList=$("#stationList").val();b.vRegionList=configInt.cache.vRegionList.val();b.addedBy=configInt.cache.addedBy.val();b.description=configInt.cache.addDescription.val();var d=function(e,g,f){configInt.cache.mapMessage.html(e.msg);resetPage()};URLstring="/set/virtualRegionMap";if(c=="metar"){URLstring="/set/metarvirtualRegionMap"}var a={};a.url=configInt.settings.baseURL+URLstring;a.data=b;a.success=d;return restCall(a);return}function deleteVirtualRegionMap(c){console.log("info: deleteVirtualRegionMap");var b={};b.stationList=$("#stationList").val();b.vRegion=$("#vRegionList").val();b.addedBy=configInt.cache.addedBy.val();b.description=configInt.cache.addDescription.val();var d=function(e,g,f){configInt.cache.mapMessage.html(e.msg);resetPage()};URLstring="/delete/virtualRegionMap";if(c=="metar"){URLstring="/delete/metarvirtualRegionMap"}var a={};a.url=configInt.settings.baseURL+URLstring;a.data=b;a.success=d;return restCall(a);return}function userAdd(){configInt.cache.addSubmit.prop("disabled",true);var e=function(f,h,g){if(g.status!=200){d="Error: ("+g+"). You might want to ask someone to look in the web logs for the details of this error. Please give the admin the time of this error so they can find the matching info in the logs.";console.log(g.statusText);alert(d)}else{if(g.responseJSON.msg.toLowerCase().indexOf("success")>=0){configInt.cache.addMessage.text(g.responseJSON.msg);$("table").trigger("update");drawPage()}else{if(g.responseJSON.msg.toLowerCase().indexOf("warning")>=0){configInt.cache.addMessage.text(g.responseJSON.msg)}else{d="Unknow error: ("+g.status+")  "+g.statusText+" You might want to ask someone to look in the web logs for the details of this error. Please give the admin the time of this error so they can find the matching info in the logs.";console.log("Unknow error: ("+g.status+")  "+g.statusText);alert(d)}}}configInt.cache.addSubmit.prop("disabled",false)};var c={};c.username=configInt.cache.addUsername.val();c.roles=$("#addRole").selectList().val();c.password=configInt.cache.addPassword.val();c.addedBy=configInt.cache.addedBy.val();c.description=configInt.cache.addDescription.val();for(var b in c){if(c[b]==""){var d="Missing needed data";console.log(d);return"Error: "+d}}var a={};a.url=configInt.settings.baseURL+"/user/add";a.data=c;a.success=e;a.error=e;restCall(a);return"success"}function userModifyRole(){configInt.cache.modifySubmit.prop("disabled",true);var e=function(f,h,g){if(g.status!=200){d="Error: ("+g+"). You might want to ask someone to look in the web logs for the details of this error. Please give the admin the time of this error so they can find the matching info in the logs.";console.log(g.statusText);alert(d)}else{if(g.responseJSON.msg.toLowerCase().indexOf("success")>=0){configInt.cache.modifyMessage.text(g.responseJSON.msg);$("table").trigger("update");drawPage()}else{d="Unknow error: ("+g.status+")  "+g.statusText+" You might want to ask someone to look in the web logs for the details of this error. Please give the admin the time of this error so they can find the matching info in the logs.";console.log("Unknow error: ("+g.status+")  "+g.statusText);alert(d)}}configInt.cache.modifySubmit.prop("disabled",false)};var c={};c.username=configInt.cache.modifyUsername.val();c.roles=$("#modifyRole").selectList().val();for(var b in c){console.log(b);if(c[b]==""){var d="Missing needed data";console.log(d);return"Error: "+d}}var a={};a.url=configInt.settings.baseURL+"/user/setRole";a.data=c;a.success=e;a.error=e;restCall(a);return"success"}function userSetPassword(){configInt.cache.passwordSubmit.prop("disabled",true);var e=function(f,h,g){if(g.status!=200){d="Error: ("+g+"). You might want to ask someone to look in the web logs for the details of this error. Please give the admin the time of this error so they can find the matching info in the logs.";console.log(g.statusText);alert(d)}else{if(g.responseJSON.msg.toLowerCase().indexOf("success")>=0){configInt.cache.passwordMessage.text(g.responseJSON.msg);drawPage()}else{d="Unknow error: ("+g.status+")  "+g.statusText+" You might want to ask someone to look in the web logs for the details of this error. Please give the admin the time of this error so they can find the matching info in the logs.";console.log("Unknow error: ("+g.status+")  "+g.statusText);alert(d)}}configInt.cache.passwordSubmit.prop("disabled",false)};var c={};c.username=configInt.cache.changeUsername.val();c.password=configInt.cache.changePassword.val();for(var b in c){console.log(b);if(c[b]==""){var d="Missing needed data";console.log(d);return"Error: "+d}}var a={};a.url=configInt.settings.baseURL+"/user/setPassword";a.data=c;a.success=e;a.error=e;restCall(a);return"success"}function userDelete(){var a;var d=confirm("Are you sure you want to delete this user?");if(d!=true){alert("Canceled deletion!");return"canceled"}configInt.cache.deleteSubmit.prop("disabled",true);var g=function(h,k,j){if(j.status!=200){f="Error: ("+j+"). You might want to ask someone to look in the web logs for the details of this error. Please give the admin the time of this error so they can find the matching info in the logs.";console.log(j.statusText);alert(f)}else{if(j.responseJSON.msg.toLowerCase().indexOf("success")>=0){configInt.cache.deleteMessage.text(j.responseJSON.msg);$("table").trigger("update");drawPage()}else{f="Unknow error: ("+j.status+")  "+j.statusText+" You might want to ask someone to look in the web logs for the details of this error. Please give the admin the time of this error so they can find the matching info in the logs.";console.log("Unknow error: ("+j.status+")  "+j.statusText);alert(f)}}configInt.cache.deleteSubmit.prop("disabled",false)};var e={};e.userID=configInt.cache.deleteUser.val();for(var c in e){console.log(c);if(typeof e[c]=="undefined"){var f="Missing needed data";console.log(f);return"Error: "+f}}var b={};b.url=configInt.settings.baseURL+"/user/delete";b.data=e;b.success=g;b.error=g;restCall(b);return"success"}function roleAdd(){console.log("roleAdd was called");configInt.cache.addSubmit.prop("disabled",true);var e=function(f,h,g){if(g.status!=200){d="Error: ("+g.statusText+"). You might want to ask someone to look in the web logs for the details of this error. Please give the admin the time of this error so they can find the matching info in the logs.";console.log(g.statusText);alert(d)}else{if(f.msg.toLowerCase().indexOf("success")>=0){configInt.cache.addMessage.text(g.responseJSON.msg);$("table").trigger("update");drawPage()}else{if(g.responseJSON.msg.toLowerCase().indexOf("warning")>=0){configInt.cache.addMessage.text(g.responseJSON.msg)}else{d="Unknow error: ("+g.status+")  "+g.statusText+" You might want to ask someone to look in the web logs for the details of this error. Please give the admin the time of this error so they can find the matching info in the logs.";console.log("Unknow error: ("+g.status+")  "+g.statusText);alert(d)}}}configInt.cache.addSubmit.prop("disabled",false);return f.msg};var c={};c.role=configInt.cache.addRole.val();c.addedBy=configInt.cache.addedBy.val();c.countryCode=configInt.cache.addCountryCode.val();c.description=configInt.cache.addDescription.val();c.metarData=configInt.cache.addmetarData.is(":checked")?1:0;c.ltgData=configInt.cache.addltgData.is(":checked")?1:0;c.graphData=configInt.cache.addgraphData.is(":checked")?1:0;c.tickerData=configInt.cache.addtickerData.is(":checked")?1:0;for(var b in c){if(isUndefined(c[b])){var d="Missing needed data";console.log(d);return"Error: "+d}}var a={};a.url=configInt.settings.baseURL+"/role/add";a.data=c;a.success=e;a.error=e;restCall(a);return}function roleRename(){console.log("roleRename was called");configInt.cache.renameSubmit.prop("disabled",true);var e=function(f,h,g){if(g.status!=200){d="Error: ("+g.statusText+"). You might want to ask someone to look in the web logs for the details of this error. Please give the admin the time of this error so they can find the matching info in the logs.";console.log(g.statusText);alert(d)}else{if(f.msg.toLowerCase().indexOf("success")>=0){configInt.cache.renameMessage.text(g.responseJSON.msg);$("table").trigger("update");drawPage()}else{if(g.responseJSON.msg.toLowerCase().indexOf("warning")>=0){configInt.cache.renameMessage.text(g.responseJSON.msg)}else{d="Unknow error: ("+g.status+")  "+g.statusText+" You might want to ask someone to look in the web logs for the details of this error. Please give the admin the time of this error so they can find the matching info in the logs.";console.log("Unknow error: ("+g.status+")  "+g.statusText);alert(d)}}}configInt.cache.renameSubmit.prop("disabled",false);return f.msg};var c={};c.regionID=configInt.cache.regionID.val();c.newName=configInt.cache.newName.val();c.newDescription=configInt.cache.newDescription.val();for(var b in c){if(isUndefined(c[b])){var d="Missing needed data";console.log(d);return"Error: "+d}}var a={};a.url=configInt.settings.baseURL+"/role/rename";a.data=c;a.success=e;a.error=e;restCall(a);return}function roleDelete(){configInt.cache.deleteSubmit.prop("disabled",true);configInt.cache.deleteMessage.text("");var d={};d.roleID=configInt.cache.deleteRole.val();for(var a in d){if(d[a]==""){var e="Missing needed data";console.log(e);configInt.cache.deleteMessage.text("Error: "+e);configInt.cache.deleteSubmit.prop("disabled",false);return"Error: "+e}}var c=function(f,j,h){if(h.status!=200){e="Error: ("+h.statusText+"). You might want to ask someone to look in the web logs for the details of this error. Please give the admin the time of this error so they can find the matching info in the logs.";console.log(h.statusText);alert(e)}else{if(h.responseText.toLowerCase().indexOf("error")<0){console.log(f);var g=confirm("Are you sure you want to delete this role? The databases currently have the following associations:\n AuthDB: "+f.auth+"\n CloudDB: "+f.cloud+"\n MetarDB: "+f.metar);if(g!=true){configInt.cache.deleteMessage.text("Canceled deletion!");configInt.cache.deleteSubmit.prop("disabled",false);return"canceled"}f.msg=roleDeletePart2()}else{e="Unknow error: ("+h.status+")  "+h.statusText+" You might want to ask someone to look in the web logs for the details of this error. Please give the admin the time of this error so they can find the matching info in the logs.";console.log("Unknow error: ("+h.status+")  "+h.statusText);alert(e)}}$("table").trigger("update");drawPage();configInt.cache.deleteSubmit.prop("disabled",false);return f.msg};var b={};b.url=configInt.settings.baseURL+"/role/count";b.data=d;b.success=c;b.error=c;restCall(b);return}function roleDeletePart2(){var e=function(f,h,g){if(g.status!=200){d="Error: ("+g.statusText+"). You might want to ask someone to look in the web logs for the details of this error. Please give the admin the time of this error so they can find the matching info in the logs.";console.log(g.statusText);alert(d)}else{if(g.responseText.toLowerCase().indexOf("success")>=0){configInt.cache.deleteMessage.text("Successfully deleted the role");$("table").trigger("update");drawPage()}else{if(g.responseJSON.msg.toLowerCase().indexOf("warning")>=0){configInt.cache.addMessage.text(g.responseJSON.msg)}else{d="Unknow error: ("+g.status+")  "+g.statusText+" You might want to ask someone to look in the web logs for the details of this error. Please give the admin the time of this error so they can find the matching info in the logs.";console.log("Unknow error: ("+g.status+")  "+g.statusText);alert(d)}}}return f.msg};var c={};c.roleID=configInt.cache.deleteRole.val();for(var b in c){console.log(b);if(typeof c[b]=="undefined"){var d="Missing needed data";console.log(d);return"Error: "+d}}var a={};a.url=configInt.settings.baseURL+"/role/deleteAll";a.data=c;a.success=e;a.error=e;restCall(a);return}function setRole(){configInt.cache.modifyRoleSubmit.prop("disabled",true);var e=function(f,h,g){if(g.status!=200){d="Error: ("+g.statusText+"). You might want to ask someone to look in the web logs for the details of this error. Please give the admin the time of this error so they can find the matching info in the logs.";console.log(g.statusText+"   "+f.msg);alert(d)}else{if(g.responseText.toLowerCase().indexOf("success")>=0){configInt.cache.modifyMessage.text(g.responseJSON.msg)}else{d=f.msg+". You might want to ask someone to look in the web logs for the details of this error. Please give the admin the time of this error so they can find the matching info in the logs.";console.log("Unknow error: ("+g.status+")  "+g.statusText+"  "+f.msg);configInt.cache.modifyMessage.html(f.msg);alert(d)}}modifySelectRoles();configInt.cache.modifyRoleSubmit.prop("disabled",false);$("table").trigger("update");drawPage();return f.msg};var c={};c.roleID=configInt.cache.modifyRole.val();c.metarData=configInt.cache.metarData.is(":checked")?1:0;c.ltgData=configInt.cache.ltgData.is(":checked")?1:0;c.graphData=configInt.cache.graphData.is(":checked")?1:0;c.tickerData=configInt.cache.tickerData.is(":checked")?1:0;c.regionID=configInt.cache.modifyCountryCode.val();c.roleName=configInt.cache.modifyRoleName.val();c.roleDescription=configInt.cache.modifyDescription.val();for(var b in c){console.log(b);if(isUndefined(c[b])){var d="setRole: Missing needed data";console.log(d);return"Error: "+d}}var a={};a.url=configInt.settings.baseURL+"/role/setProperties";a.data=c;a.success=e;a.error=e;restCall(a);return}function modifySelectRoles(){var b=function(c,j,g){configInt.cache.modifyRole.empty();var d="<option>Choose one</option>";var f="";var h="&nbsp;&nbsp;&nbsp;&nbsp;";for(var e=0;e<c.length;e++){d+='<option value="'+c[e].id+'">'+c[e].role+" ("+c[e].role_description+")"+h+"</option>";f+='<ul id="'+c[e].id+'"><li>'+c[e].metar+"</li><li>"+c[e].ltg+"</li><li>"+c[e].graph+"</li><li>"+c[e].ticker+"</li>";f+="<li>"+c[e].country_code+"</li><li>"+c[e].role+"</li><li>"+c[e].role_description+"</li></ul>"}configInt.cache.roles.html(d);configInt.cache.modifyRoleData.html(f);configInt.cache.modifyRole.change(function(){var k=$("#"+configInt.cache.modifyRole.val()+" li").map(function(){return $(this).text()}).get();console.log("Handler for .change() called.");if(k[0]==1){configInt.cache.metarData.prop("checked",true)}else{configInt.cache.metarData.prop("checked",false)}if(k[1]==1){configInt.cache.ltgData.prop("checked",true)}else{configInt.cache.ltgData.prop("checked",false)}if(k[2]==1){configInt.cache.graphData.prop("checked",true)}else{configInt.cache.graphData.prop("checked",false)}if(k[3]==1){configInt.cache.tickerData.prop("checked",true)}else{configInt.cache.tickerData.prop("checked",false)}configInt.cache.modifyCountryCode.combobox("value",k[4]);configInt.cache.modifyRoleName.val(k[5]);configInt.cache.modifyDescription.val(k[6])})};var a={};a.url=configInt.settings.baseURL+"/user/listRoles/";a.success=b;return restCall(a)}function createRegionRenameMap(){var b=function(c,g,f){var e="";for(var d=0;d<c.length;d++){e+='<ul id="r'+c[d].id+'"><li>'+c[d].name+"</li><li>"+c[d].description+"</li></ul>"}configInt.cache.renameData.html(e);console.log("createRenameDataMap")};var a={};a.url=configInt.settings.baseURL+"/user/listRoles2/";a.success=b;return restCall(a)}function regionRenameFullNames(){var a=$("#r"+configInt.cache.regionID.val()+" li").map(function(){return $(this).text()}).get();if(!isUndefined(a)){configInt.cache.newName.val(a[0]);configInt.cache.newDescription.val(a[1])}return}function fillSelectRoles(e,a,c){console.info("sgiven (div,selectInputID,userID): ("+e+", "+a+", "+c+")");var d=function(f,l,j){e.children().remove();var h='<table><tr valign="top"><td>Virtual Regions:</td><td><select id="'+a+'" multiple="multiple" title="Please Select" size="1">';var k="&nbsp;&nbsp;&nbsp;&nbsp;";for(var g=0;g<f.length;g++){if("used" in f[g]==true){if(f[g].used==1){h+='<option disabled="disabled" value="'+f[g].id+'" selected="selected">'+f[g].role+k+"</option>"}else{h+='<option value="'+f[g].id+'">'+f[g].role+k+"</option>"}}else{h+='<option value="'+f[g].id+'">'+f[g].role+" ("+f[g].role_description+")"+k+"</option>"}}e.html(h+"</select></td></tr></table>");$("#"+a).selectList()};var b={};if(isUndefined(c)){c=""}b.url=configInt.settings.baseURL+"/user/listRoles/"+c;b.success=d;return restCall(b)}function makeEditable(a){$(".dblclick").editable(configInt.settings.baseURL+"/edit/",{select:true,event:"dblclick",indicator:"<img src='/images/indicator.gif'>",tooltip:"Doubleclick to edit...",placeholder:"",style:"inherit",submit:"OK",submitdata:{database:a},callback:function(c,b){$(this).text($.parseJSON(c).value)}});$(".editable_select").editable(configInt.settings.baseURL+"/edit/",{type:"select",event:"dblclick",indicator:'<img src="/images/indicator.gif">',loadurl:"/data/country_codes_small.json",placeholder:"",style:"inherit",submit:"OK",submitdata:{database:a},callback:function(c,b){$(this).text($.parseJSON(c).value)}});return}function pagerMakeEditable(e,b,f,d,a){for(key in d){var c=0;$(".tablesorter tbody tr td:nth-child("+d[key]+")").each(function(){$(this).addClass("dblclick");$(this).attr("id",b[c]+"-"+f[d[key]-1]);c++})}for(key in a){c=0;$(".tablesorter tbody tr td:nth-child("+a[key]+")").each(function(){$(this).addClass("editable_select");$(this).attr("id",b[c]+"-"+f[a[key]-1]);c++})}$(".dblclick").editable(configInt.settings.baseURL+"/edit/",{select:true,event:"dblclick",indicator:"<img src='/images/indicator.gif'>",tooltip:"Doubleclick to edit...",placeholder:"",style:"inherit",submit:"OK",submitdata:{database:e},callback:function(h,g){$(this).text($.parseJSON(h).value)},onsubmit:function(k,l){var g=$(l).find("input");var h=g.val();var j=$(l).attr("id").toString().match(/\-(.*)$/)[1];return editValidation(g,h,j)}});$(".editable_select").editable(configInt.settings.baseURL+"/edit/",{type:"select",event:"dblclick",indicator:'<img src="/images/indicator.gif">',loadurl:"/data/country_codes_small.json",placeholder:"",style:"inherit",submit:"OK",submitdata:{database:e},callback:function(h,g){$(this).text($.parseJSON(h).value)}});if($(".tablesorter thead tr th:nth-child(4) div").html().toString().match(/Latitude/)){console.log("Adding Station Metadata filters");$(".tablesorter thead tr td:nth-child(3)").find("input").alphanum({disallow:"abcdefghijklmnopqrstuvwxyz",allow:"- :"});$(".tablesorter thead tr td:nth-child(4)").find("input").numeric({allowMinus:true,allowDecSep:true});$(".tablesorter thead tr td:nth-child(5)").find("input").numeric({allowMinus:true,allowDecSep:true});$(".tablesorter thead tr td:nth-child(6)").find("input").numeric({allowMinus:true,allowDecSep:true})}else{if($(".tablesorter thead tr th:nth-child(3) div").html().toString().match(/Last Received Data/)){console.log("Adding Station Association filters");$(".tablesorter thead tr td:nth-child(3)").find("input").alphanum({disallow:"abcdefghijklmnopqrstuvwxyz",allow:"-"})}else{if($(".tablesorter thead tr th:nth-child(5) div").html().toString().match(/Date Added/)){console.log("Adding User Management filters");$(".tablesorter thead tr td:nth-child(5)").find("input").alphanum({disallow:"abcdefghijklmnopqrstuvwxyz",allow:"-"})}else{if($(".tablesorter thead tr th:nth-child(2) div").html().toString().match(/User Count/)){console.log("Adding Region filters");$(".tablesorter thead tr td:nth-child(2)").find("input").numeric();$(".tablesorter thead tr td:nth-child(5)").find("input").alphanum({disallow:"0123456789bcdghijkmnopqvwxyz"});$(".tablesorter thead tr td:nth-child(6)").find("input").alphanum({disallow:"0123456789bcdghijkmnopqvwxyz"});$(".tablesorter thead tr td:nth-child(7)").find("input").alphanum({disallow:"0123456789bcdghijkmnopqvwxyz"});$(".tablesorter thead tr td:nth-child(8)").find("input").alphanum({disallow:"0123456789bcdghijkmnopqvwxyz"})}}}}return}function editValidation(a,b,c){var d=0;if(c=="lat"){if(isLatitude(b)){console.log("Validation correct: is Latitude");return true}else{d="Error: validation failed for the given Latitude value. Need a value between -90 and 90."}}else{if(c=="lon"){if(isLongitude(b)){console.log("Validation correct: is Longitude");return true}else{d="Error: validation failed for the given Longitude value. Need a value between -180 and 180."}}else{if(c=="alt"){if(isNumeric(b)){console.log("Validation correct: is Numeric value for Altitude");return true}else{d="Validation failed. not a Numeric value for Altitude"}}else{if(c=="station_name"){if(!isUndefined(b)&&b!=""){console.log("Validation correct: is Numeric value for Altitude");return true}else{d="Validation failed. Input must not be blank!"}}}}}if(!d==0){console.log(d);alert(d);a.css("background-color","#c00").css("color","#fff");return false}return true}function isLatitude(a){if(a==null||!a.toString().match(/^(-?[1-8]?\d(?:\.\d{1,18})?|90(?:\.0{1,18})?)$/)){return false}return true}function isLongitude(a){if(a==null||!a.toString().match(/^(-?(?:1[0-7]|[1-9])?\d(?:\.\d{1,18})?|180(?:\.0{1,18})?)$/)){return false}return true}function isNumeric(a){if(a==null||!a.toString().match(/^[-]?\d*\.?\d*$/)){return false}return true}function isFloat(a){if(a==null||!a.toString().match(/^\d{0,2}(?:\.\d{0,2}){0,1}$/)){return false}return true}function setCombobox(e,c,b){var d=function(f,j,h){e.html('<option value="" disabled="disabled" selected="selected"></option>');for(var g in f){e.append('<option value="'+f[g]["id"]+'">'+f[g]["name"]+"</option>")}e.combobox(b);$(".ui-autocomplete-input").css("width","350px")};var a={};if(c.match(/^http/)||c.match(/^\//)){a.url=c}else{a.url=configInt.settings.baseURL+"/getSimple/"+c}a.success=d;return restCall(a)}function setAutocomplete(c,b,a){c.autocomplete({source:function(e,d){var e=$.ajax({url:configInt.settings.baseURL+"/get/"+b+"/"+e.term,method:"GET",dataType:"json",cache:false,timeout:30000});e.done(function(g,h,f){d($.map(g,function(j){return{label:j.name,id:j.id}}))});e.fail(function(f,h,g){console.error("The following error occured: "+h+"  "+g);status="Error: "+g})},minLength:1,open:function(){$(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close:function(){$(this).removeClass("ui-corner-top").addClass("ui-corner-all")}})}function setSelectBox(d,b){var c=function(e,h,g){d.html('<option value="" disabled="disabled" selected="selected">Please select</option>');for(var f in e){d.append('<option value="'+e[f]["id"]+'">'+e[f]["name"]+"</option>")}};var a={};a.url=configInt.settings.baseURL+"/getSimple/"+b;a.success=c;return restCall(a)}function setOrganizationSelect(){var b=function(c,f,e){configInt.cache.orgID.html('<option value="">Choose one</option>');for(var d in c){configInt.cache.orgID.append("<option value="+c[d]+">"+c[d]+"</option>")}configInt.cache.orgID.combobox()};var a={};a.url=configInt.settings.baseURL+"/get/organizationID";a.success=b;return restCall(a)}function updateClock(){var f=new Date();var d=f.getUTCFullYear();var g=f.getUTCMonth()+1;var b=f.getUTCDate();var a=f.getUTCHours();var c=f.getUTCMinutes();var h=f.getUTCSeconds();a=(a<10?"0":"")+a;c=(c<10?"0":"")+c;h=(h<10?"0":"")+h;g=(g<10?"0":"")+g;b=(b<10?"0":"")+b;var e=d+"-"+g+"-"+b+"  "+a+":"+c+":"+h+" UTC";$("#clock").html(e)}function inputValidation(b,a,d){div=window.configInt.cache[b];divInfo=window.configInt.cache[b+"Info"];var c;if(a=="notBlank"){if(isUndefined(div.val())||div.val()==null||div.val()=="Choose one"||div.val()=="blank"){c="Input must not be blank!"}}else{if(a=="typeLength"){characterType=d[0];min=d[1];max=d[2];if(isUndefined(characterType)){console.log("Error: Missing needed character type variable")}if(isUndefined(min)||!isUndefined(max)){console.log("Error: Missing needed length variables")}if(characterType=="lower"){regex="^[a-z0-9-_.]{"+min+","+max+"}$";if(!div.val().match(regex)){c="Input must be lower case alphanumeric with '_' or '-' or ',' <br /> Also input must be at least "+min+" letters and less than "+max+"!"}}else{if(characterType=="password"){regex="^[a-z0-9~@#%^&()-_{}.]{"+min+","+max+"}$";if(!div.val().match(regex)){c="Input can be mixed case alphanumeric or the following: ~ @ # % ^ & ( ) - _ { } . <br /> Also input must be at least "+min+" letters and less than "+max+"!"}}else{if(characterType=="mixed"){regex="^[a-zA-Z0-9-_.]{"+min+","+max+"}$";if(!div.val().match(regex)){c="Input can be mixed case alphanumeric or the following: _ . - <br /> Also input must be at least "+min+" letters and less than "+max+"!"}}else{if(characterType=="username"){regex="^[a-zA-Z0-9-_.@]{"+min+","+max+"}$";if(!div.val().match(regex)){c="Input can be mixed case alphanumeric or the following: _ . - @ <br /> Also input must be at least "+min+" letters and less than "+max+"!"}}else{if(characterType=="number"){regex="^[0-9]{"+min+","+max+"}$";if(!div.val().match(regex)){c="Input must be a number. Also input must be at least "+min+" letters and less than "+max+"!"}}else{console.log("Error: given characterType is not one that can be useded: ("+characterType+")");return false}}}}}}else{if(a=="length"){min=d[0];max=d[1];if(!isUndefined(min)||!isUndefined(max)){console.log("Error: Missing needed length variables")}if(div.val()==null||div.val()=="Choose one"||div.val()=="blank"){c="Input must not be blank!"}else{if(div.val().length<min||div.val().length>max){c="Input must be at least "+min+" letters and less than "+max+"!"}}}else{console.log("Error: Bad checkType given: ("+a+")");return false}}}if(!isUndefined(c)){div.addClass("ui-state-highlight");console.log(c);alertIcon='<span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span>';divInfo.html(alertIcon+c);divInfo.addClass("ui-state-highlight");return false}div.removeClass("ui-state-highlight");divInfo.text("");divInfo.removeClass("ui-state-highlight");return true}function restCall(c){var a;if(isUndefined(c.url)){a="Error: restCall: Given options' URL not defined";console.error(a);return(a)}if(isUndefined(c.success)){a="Error: restCall: Given options' success not defined";console.error(a);return(a)}var d,b,e={type:"POST",dataType:"json",timeout:30000,fail:function(f,h,g){console.log("The following error occured: "+h+"  "+g+". You might want to ask someone to look in the web logs for the details of this error. Please give the admin the time of this error so they can find the matching info in the logs.")}};b=_.defaults(c,e);d=$.ajax(b);return(d)}function pagerTable(f,b,e,a){if(isUndefined(f)){f=""}if(isUndefined(b)){b=15}var d=new Array();var g=new Array();$("table").tablesorter({theme:"blue",widthFixed:true,sortLocaleCompare:true,sortList:[[0,1]],widgets:["zebra","filter"]}).tablesorterPager({container:$(".pager"),ajaxUrl:"/rest/v1.0/get"+f+"/pagerTable?size={size}&page={page}&{filterList:filter}&{sortList:column}",ajaxObject:{dataType:"json",cache:false},ajaxProcessing:function(k){if(k&&k.hasOwnProperty("rows")){if(k.hasOwnProperty("ids")){d=k.ids;g=k.names}var h,p,n,m=k.rows,o=k.total_rows,j=k.headers,q=[],l=m.length;for(h=0;h<l;h++){p=[];for(n in m[h]){if(typeof(n)==="string"){p.push(m[h][n])}}q.push(p)}return[o,q,j]}},output:"{startRow} to {endRow} ({totalRows})",updateArrows:true,page:0,size:b,fixedHeight:false,removeRows:false,cssNext:".next",cssPrev:".prev",cssFirst:".first",cssLast:".last",cssPageDisplay:".pagedisplay",cssPageSize:".pagesize",cssErrorRow:"tablesorter-errorRow",cssDisabled:"disabled"});jQuery.fn.contentChange=function(j){var h=jQuery(this);h.each(function(k){var l=jQuery(this);l.data("lastContents",l.html());window.watchContentChange=window.watchContentChange?window.watchContentChange:[];window.watchContentChange.push({element:l,callback:j})});return h};setInterval(function(){if(window.watchContentChange){for(i in window.watchContentChange){if(window.watchContentChange[i].element.data("lastContents")!=window.watchContentChange[i].element.html()){window.watchContentChange[i].callback.apply(window.watchContentChange[i].element);window.watchContentChange[i].element.data("lastContents",window.watchContentChange[i].element.html())}}}},500);function c(){var h="cloud";if(f.match(/^metar/)){h="metar"}console.log("calling: pagerMakeEditable  Using database: "+h);pagerMakeEditable(h,d,g,e,a)}$("div#resultsTable").contentChange(c);return}function isUndefined(a){return typeof a==="undefined"}function tableDateString(b){function a(c){return c<10?"0"+c:c}return b.getUTCFullYear()+"-"+a(b.getUTCMonth()+1)+"-"+a(b.getUTCDate())+" "+a(b.getUTCHours())+":"+a(b.getUTCMinutes())+":"+a(b.getUTCSeconds())}function print_r(a,g){var f="";if(!g){g=0}var e="";for(var b=0;b<g+1;b++){e+="    "}if(typeof(a)=="object"){for(var c in a){var d=a[c];if(typeof(d)=="object"){f+=e+"'"+c+"' ...\n";f+=print_r(d,g+1)}else{f+=e+"'"+c+"' => \""+d+'"\n'}}}else{f="===>"+a+"<===("+typeof(a)+")"}return f};