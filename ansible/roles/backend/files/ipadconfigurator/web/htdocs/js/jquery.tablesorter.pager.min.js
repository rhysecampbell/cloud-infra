/*!
 * tablesorter (FORK) pager plugin
 * updated 2/9/2015 (v2.19.1)
 */
;(function(b){var a=b.tablesorter;b.extend({tablesorterPager:new function(){this.defaults={container:null,ajaxUrl:null,customAjaxUrl:function(B,A){return A},ajaxObject:{dataType:"json"},processAjaxOnInit:true,ajaxProcessing:function(A){return[0,[],null]},output:"{startRow} to {endRow} of {totalRows} rows",updateArrows:true,page:0,pageReset:0,size:10,maxOptionSize:20,savePages:true,storageKey:"tablesorter-pager",fixedHeight:false,countChildRows:false,removeRows:false,cssFirst:".first",cssPrev:".prev",cssNext:".next",cssLast:".last",cssGoto:".gotoPage",cssPageDisplay:".pagedisplay",cssPageSize:".pagesize",cssErrorRow:"tablesorter-errorRow",cssDisabled:"disabled",totalRows:0,totalPages:0,filteredRows:0,filteredPages:0,ajaxCounter:0,currentFilters:[],startRow:0,endRow:0,$size:null,last:{}};var o="filterInit filterStart filterEnd sortEnd disable enable destroy updateComplete pageSize pageSet pageAndSize pagerUpdate ",p=this,y=function(B,D){var H="addClass",A="removeClass",F=B.cssDisabled,C=!!D,E=(C||B.page===0),G=Math.min(B.totalPages,B.filteredPages),I=(C||(B.page===G-1)||G===0);if(B.updateArrows){B.$container.find(B.cssFirst+","+B.cssPrev)[E?H:A](F).attr("aria-disabled",E);B.$container.find(B.cssNext+","+B.cssLast)[I?H:A](F).attr("aria-disabled",I)}},i=function(B,C){var D=B.config,A=D.$table.hasClass("hasFilters");if(A&&!C.ajaxUrl){if(b.isEmptyObject(D.cache)){C.filteredRows=C.totalRows=D.$tbodies.eq(0).children("tr").not(C.countChildRows?"":"."+D.cssChildRow).length}else{C.filteredRows=0;b.each(D.cache[0].normalized,function(E,F){C.filteredRows+=C.regexRows.test(F[D.columns].$row[0].className)?0:1})}}else{if(!A){C.filteredRows=C.totalRows}}},u=function(E,G,D){if(G.initializing){return}var C,A,B,H=E.config,F=G.size||G.settings.size||10;if(G.countChildRows){A.push(H.cssChildRow)}G.totalPages=Math.ceil(G.totalRows/F);H.totalRows=G.totalRows;i(E,G);H.filteredRows=G.filteredRows;G.filteredPages=Math.ceil(G.filteredRows/F)||0;if(Math.min(G.totalPages,G.filteredPages)>=0){A=(G.size*G.page>G.filteredRows)&&D;G.page=(A)?G.pageReset||0:G.page;G.startRow=(A)?G.size*G.page+1:(G.filteredRows===0?0:G.size*G.page+1);G.endRow=Math.min(G.filteredRows,G.totalRows,G.size*(G.page+1));B=G.$container.find(G.cssPageDisplay);C=(G.ajaxData&&G.ajaxData.output?G.ajaxData.output||G.output:G.output).replace(/\{page([\-+]\d+)?\}/gi,function(I,J){return G.totalPages?G.page+(J?parseInt(J,10):1):0}).replace(/\{\w+(\s*:\s*\w+)?\}/gi,function(K){var J,L,N=K.replace(/[{}\s]/g,""),I=N.split(":"),M=G.ajaxData,O=/(rows?|pages?)$/i.test(N)?0:"";if(/(startRow|page)/.test(I[0])&&I[1]==="input"){J=(""+(I[0]==="page"?G.totalPages:G.totalRows)).length;L=I[0]==="page"?G.page+1:G.startRow;return'<input type="text" class="ts-'+I[0]+'" style="max-width:'+J+'em" value="'+L+'"/>'}return I.length>1&&M&&M[I[0]]?M[I[0]][I[1]]:G[N]||(M?M[N]:O)||O});if(G.$goto.length){A="";b.each(n(G),function(J,I){A+='<option value="'+I+'">'+I+"</option>"});G.$goto.html(A).val(G.page+1)}if(B.length){B[(B[0].tagName==="INPUT")?"val":"html"](C);B.find(".ts-startRow, .ts-page").unbind("change.pager").bind("change.pager",function(){var I=b(this).val(),J=b(this).hasClass("ts-startRow")?Math.floor(I/G.size)+1:I;H.$table.trigger("pageSet.pager",[J])})}}y(G);x(E,G);if(G.initialized&&D!==false){H.$table.trigger("pagerComplete",G);if(G.savePages&&a.storage){a.storage(E,G.storageKey,{page:G.page,size:G.size})}}},n=function(C){var G,M,F,E,B,I,J=Math.min(C.totalPages,C.filteredPages)||1,L=Math.ceil((J/C.maxOptionSize)/5)*5,N=J>C.maxOptionSize,K=C.page+1,O=L,H=J-L,A=[1],D=(N)?L:1;for(G=D;G<=J;){A.push(G);G=G+(N?L:1)}A.push(J);if(N){F=[];M=Math.max(Math.floor(C.maxOptionSize/L)-1,5);O=K-M;if(O<1){O=1}H=K+M;if(H>J){H=J}for(G=O;G<=H;G++){F.push(G)}A=b.grep(A,function(Q,P){return b.inArray(Q,A)===P});B=A.length;I=F.length;if(B-I>L/2&&B+I>C.maxOptionSize){E=Math.floor(B/2)-Math.floor(I/2);Array.prototype.splice.apply(A,[E,I])}A=A.concat(F)}A=b.grep(A,function(Q,P){return b.inArray(Q,A)===P}).sort(function(Q,P){return Q-P});return A},x=function(C,D){var E,A,F=C.config,B=F.$tbodies.eq(0);B.find("tr.pagerSavedHeightSpacer").remove();if(D.fixedHeight&&!D.isDisabled){A=b.data(C,"pagerSavedHeight");if(A){E=A-B.height();if(E>5&&b.data(C,"pagerLastSize")===D.size&&B.children("tr:visible").length<D.size){B.append('<tr class="pagerSavedHeightSpacer '+F.selectorRemove.slice(1)+'" style="height:'+E+'px;"></tr>')}}}},h=function(C,D){var A,E=C.config,B=E.$tbodies.eq(0);B.find("tr.pagerSavedHeightSpacer").remove();if(!B.children("tr:visible").length){B.append('<tr class="pagerSavedHeightSpacer '+E.selectorRemove.slice(1)+'"><td>&nbsp</td></tr>')}A=B.children("tr").eq(0).height()*D.size;b.data(C,"pagerSavedHeight",A);x(C,D);b.data(C,"pagerLastSize",D.size)},q=function(J,A){if(!A.ajaxUrl){var D,E=0,H=J.config,K=H.$tbodies.eq(0).children("tr"),B=K.length,L=(A.page*A.size),G=L+A.size,F=H.widgetOptions&&H.widgetOptions.filter_filteredRow||"filtered",I=0,C=0;A.cacheIndex=[];for(D=0;D<B;D++){if(!K[D].className.match(F)){if(C===L&&K[D].className.match(H.cssChildRow)){K[D].style.display="none"}else{K[D].style.display=(C>=L&&C<G)?"":"none";if(I!==C&&C>=L&&C<G){A.cacheIndex.push(D);I=C}C+=K[D].className.match(H.cssChildRow+"|"+H.selectorRemove.slice(1))&&!A.countChildRows?0:1;if(C===G&&K[D].style.display!=="none"&&K[D].className.match(a.css.cssHasChild)){E=D}}}}if(E>0&&K[E].className.match(a.css.cssHasChild)){while(++E<B&&K[E].className.match(H.cssChildRow)){K[E].style.display=""}}}},w=function(A,B){B.size=parseInt(B.$size.val(),10)||B.size||B.settings.size||10;b.data(A,"pagerLastSize",B.size);y(B);if(!B.removeRows){q(A,B);b(A).bind("sortEnd.pager filterEnd.pager",function(){q(A,B)})}},k=function(S,O,I,D,E){if(typeof(I.ajaxProcessing)==="function"){var M,K,G,A,P,H,C,Q,J,T,R=O.config,N=R.$table,L="",F=I.ajaxProcessing(S,O,D)||[0,[]],B=N.find("thead th").length;a.showError(O);if(E){if(R.debug){a.log("Ajax Error",D,E)}a.showError(O,D.status===0?"Not connected, verify Network":D.status===404?"Requested page not found [404]":D.status===500?"Internal Server Error [500]":E==="parsererror"?"Requested JSON parse failed":E==="timeout"?"Time out error":E==="abort"?"Ajax Request aborted":"Uncaught error: "+D.statusText+" ["+D.status+"]");R.$tbodies.eq(0).children("tr").detach();I.totalRows=0}else{if(!b.isArray(F)){I.ajaxData=F;R.totalRows=I.totalRows=F.total;R.filteredRows=I.filteredRows=typeof F.filteredRows!=="undefined"?F.filteredRows:F.total;C=F.headers;Q=F.rows}else{H=isNaN(F[0])&&!isNaN(F[1]);T=F[H?1:0];I.totalRows=isNaN(T)?I.totalRows||0:T;R.totalRows=R.filteredRows=I.filteredRows=I.totalRows;Q=I.totalRows===0?[""]:F[H?0:1]||[];C=F[2]}J=Q&&Q.length;if(Q instanceof jQuery){if(I.processAjaxOnInit){R.$tbodies.eq(0).children("tr").detach();R.$tbodies.eq(0).append(Q)}}else{if(J){for(M=0;M<J;M++){L+="<tr>";for(K=0;K<Q[M].length;K++){L+=/^\s*<td/.test(Q[M][K])?b.trim(Q[M][K]):"<td>"+Q[M][K]+"</td>"}L+="</tr>"}if(I.processAjaxOnInit){R.$tbodies.eq(0).html(L)}}}I.processAjaxOnInit=true;if(C&&C.length===B){G=N.hasClass("hasStickyHeaders");P=G?R.widgetOptions.$sticky.children("thead:first").children("tr").children():"";A=N.find("tfoot tr:first").children();R.$headers.filter("th").each(function(U){var W=b(this),V;if(W.find("."+a.css.icon).length){V=W.find("."+a.css.icon).clone(true);W.find(".tablesorter-header-inner").html(C[U]).append(V);if(G&&P.length){V=P.eq(U).find("."+a.css.icon).clone(true);P.eq(U).find(".tablesorter-header-inner").html(C[U]).append(V)}}else{W.find(".tablesorter-header-inner").html(C[U]);if(G&&P.length){P.eq(U).find(".tablesorter-header-inner").html(C[U])}}A.eq(U).html(C[U])})}}if(R.showProcessing){a.isProcessing(O)}I.totalPages=Math.ceil(I.totalRows/(I.size||I.settings.size||10));I.last.totalRows=I.totalRows;I.last.currentFilters=I.currentFilters;I.last.sortList=(R.sortList||[]).join(",");u(O,I,false);N.trigger("updateCache",[function(){if(I.initialized){setTimeout(function(){N.trigger("applyWidgets").trigger("pagerChange",I);u(O,I,true)},0)}}])}if(!I.initialized){I.initialized=true;I.initializing=false;b(O).trigger("applyWidgets").trigger("pagerInitialized",I);u(O,I)}},f=function(C,D){var B=v(C,D),F=b(document),A,E=C.config;if(B!==""){if(E.showProcessing){a.isProcessing(C,true)}F.bind("ajaxError.pager",function(I,J,H,G){k(null,C,D,J,G);F.unbind("ajaxError.pager")});A=++D.ajaxCounter;D.last.ajaxUrl=B;D.ajaxObject.url=B;D.ajaxObject.success=function(H,G,I){if(A<D.ajaxCounter){return}k(H,C,D,I);F.unbind("ajaxError.pager");if(typeof D.oldAjaxSuccess==="function"){D.oldAjaxSuccess(H)}};if(E.debug){a.log("ajax initialized",D.ajaxObject)}b.ajax(D.ajaxObject)}},v=function(I,B){var G=I.config,A=(B.ajaxUrl)?B.ajaxUrl.replace(/\{page([\-+]\d+)?\}/,function(J,K){return B.page+(K?parseInt(K,10):0)}).replace(/\{size\}/g,B.size):"",D=G.sortList,H=B.currentFilters||b(I).data("lastSearch")||[],F=A.match(/\{\s*sort(?:List)?\s*:\s*(\w*)\s*\}/),C=A.match(/\{\s*filter(?:List)?\s*:\s*(\w*)\s*\}/),E=[];if(F){F=F[1];b.each(D,function(K,J){E.push(F+"["+J[0]+"]="+J[1])});A=A.replace(/\{\s*sort(?:List)?\s*:\s*(\w*)\s*\}/g,E.length?E.join("&"):F);E=[]}if(C){C=C[1];b.each(H,function(K,J){if(J){E.push(C+"["+K+"]="+encodeURIComponent(J))}});A=A.replace(/\{\s*filter(?:List)?\s*:\s*(\w*)\s*\}/g,E.length?E.join("&"):C);B.currentFilters=H}if(typeof(B.customAjaxUrl)==="function"){A=B.customAjaxUrl(I,A)}if(G.debug){a.log("Pager ajax url: "+A)}return A},t=function(K,M,A){var B,G,F,J,D=b(K),I=K.config,E=I.$table.hasClass("hasFilters"),C=M&&M.length||0,L=(A.page*A.size),H=A.size;if(C<1){if(I.debug){a.log("Pager: no rows for pager to render")}return}if(A.page>=A.totalPages){l(K,A)}A.cacheIndex=[];A.isDisabled=false;if(A.initialized){D.trigger("pagerChange",A)}if(!A.removeRows){q(K,A)}else{a.clearTableBody(K);B=a.processTbody(K,I.$tbodies.eq(0),true);G=E?0:L;F=E?0:L;J=0;while(J<H&&G<M.length){if(!E||!/filtered/.test(M[G][0].className)){F++;if(F>L&&J<=H){J++;A.cacheIndex.push(G);B.append(M[G])}}G++}a.processTbody(K,B,false)}u(K,A);if(K.isUpdating){D.trigger("updateComplete",[K,true])}},m=function(A,B){if(B.ajax){y(B,true)}else{B.isDisabled=true;b.data(A,"pagerLastPage",B.page);b.data(A,"pagerLastSize",B.size);B.page=0;B.size=B.totalRows;B.totalPages=1;b(A).addClass("pagerDisabled").removeAttr("aria-describedby").find("tr.pagerSavedHeightSpacer").remove();t(A,A.config.rowsCopy,B);b(A).trigger("applyWidgets");if(A.config.debug){a.log("pager disabled")}}B.$size.add(B.$goto).add(B.$container.find(".ts-startRow, .ts-page")).each(function(){b(this).attr("aria-disabled","true").addClass(B.cssDisabled)[0].disabled=true})},r=function(A){var C=A.config,B=C.pager;C.$table.trigger("updateCache",[function(){var D,E=[],F=A.config.cache[0].normalized;B.totalRows=F.length;for(D=0;D<B.totalRows;D++){E.push(F[D][C.columns].$row)}C.rowsCopy=E;d(A,B,true)}])},d=function(C,D,B){if(D.isDisabled){return}var G,F=C.config,E=b(C),A=D.last;if(B!==false&&D.initialized&&b.isEmptyObject(F.cache)){return r(C)}if(D.ajax&&a.hasWidget(C,"filter")&&!F.widgetOptions.filter_initialized){return}i(C,D);G=Math.min(D.totalPages,D.filteredPages);if(D.page<0){D.page=0}if(D.page>(G-1)&&G!==0){D.page=G-1}A.currentFilters=(A.currentFilters||[]).join("")===""?[]:A.currentFilters;D.currentFilters=(D.currentFilters||[]).join("")===""?[]:D.currentFilters;if(A.page===D.page&&A.size===D.size&&A.totalRows===D.totalRows&&(A.currentFilters||[]).join(",")===(D.currentFilters||[]).join(",")&&(A.ajaxUrl||"")===(D.ajaxObject.url||"")&&(A.optAjaxUrl||"")===(D.ajaxUrl||"")&&A.sortList===(F.sortList||[]).join(",")){return}if(F.debug){a.log("Pager changing to page "+D.page)}D.last={page:D.page,size:D.size,sortList:(F.sortList||[]).join(","),totalRows:D.totalRows,currentFilters:D.currentFilters||[],ajaxUrl:D.ajaxObject.url||"",optAjaxUrl:D.ajaxUrl||""};if(D.ajax){f(C,D)}else{if(!D.ajax){t(C,F.rowsCopy,D)}}b.data(C,"pagerLastPage",D.page);if(D.initialized&&B!==false){E.trigger("pageMoved",D).trigger("applyWidgets");if(C.isUpdating){E.trigger("updateComplete",[C,true])}}},e=function(B,A,C){C.size=A||C.size||C.settings.size||10;C.$size.val(C.size);b.data(B,"pagerLastPage",C.page);b.data(B,"pagerLastSize",C.size);C.totalPages=Math.ceil(C.totalRows/C.size);C.filteredPages=Math.ceil(C.filteredRows/C.size);d(B,C)},g=function(A,B){B.page=0;d(A,B)},l=function(A,B){B.page=(Math.min(B.totalPages,B.filteredPages)-1);d(A,B)},s=function(A,B){B.page++;if(B.page>=(Math.min(B.totalPages,B.filteredPages)-1)){B.page=(Math.min(B.totalPages,B.filteredPages)-1)}d(A,B)},c=function(A,B){B.page--;if(B.page<=0){B.page=0}d(A,B)},z=function(A,B){m(A,B);B.$container.hide();A.config.appender=null;B.initialized=false;delete A.config.rowsCopy;b(A).unbind(o.split(" ").join(".pager ").replace(/\s+/g," "));if(a.storage){a.storage(A,B.storageKey,"")}},j=function(B,D,A){var C,E=B.config;D.$size.add(D.$goto).add(D.$container.find(".ts-startRow, .ts-page")).removeClass(D.cssDisabled).removeAttr("disabled").attr("aria-disabled","false");D.isDisabled=false;D.page=b.data(B,"pagerLastPage")||D.page||0;D.size=b.data(B,"pagerLastSize")||parseInt(D.$size.find("option[selected]").val(),10)||D.size||D.settings.size||10;D.$size.val(D.size);D.totalPages=Math.ceil(Math.min(D.totalRows,D.filteredRows)/D.size);if(B.id){C=B.id+"_pager_info";D.$container.find(D.cssPageDisplay).attr("id",C);E.$table.attr("aria-describedby",C)}h(B,D);if(A){E.$table.trigger("updateRows");e(B,D.size,D);w(B,D);if(E.debug){a.log("pager enabled")}}};p.appender=function(A,B){var D=A.config,C=D.pager;if(!C.ajax){D.rowsCopy=B;C.totalRows=C.countChildRows?D.$tbodies.eq(0).children("tr").length:B.length;C.size=b.data(A,"pagerLastSize")||C.size||C.settings.size||10;C.totalPages=Math.ceil(C.totalRows/C.size);t(A,B,C);u(A,C,false)}};p.construct=function(A){return this.each(function(){if(!(this.config&&this.hasInitialized)){return}var J,D,F,I=this,G=I.config,H=G.widgetOptions,B=G.pager=b.extend(true,{},b.tablesorterPager.defaults,A),E=G.$table,C=B.$container=b(B.container).addClass("tablesorter-pager").show();B.settings=b.extend(true,{},b.tablesorterPager.defaults,A);if(G.debug){a.log("Pager initializing")}B.oldAjaxSuccess=B.oldAjaxSuccess||B.ajaxObject.success;G.appender=p.appender;B.initializing=true;if(B.savePages&&a.storage){J=a.storage(I,B.storageKey)||{};B.page=isNaN(J.page)?B.page:J.page;B.size=(isNaN(J.size)?B.size:J.size)||B.settings.size||10;b.data(I,"pagerLastSize",B.size)}B.regexRows=new RegExp("("+(H.filter_filteredRow||"filtered")+"|"+G.selectorRemove.slice(1)+"|"+G.cssChildRow+")");E.unbind(o.split(" ").join(".pager ").replace(/\s+/g," ")).bind("filterInit.pager filterStart.pager",function(L,K){B.currentFilters=b.isArray(K)?K:G.$table.data("lastSearch");if(L.type==="filterStart"&&B.pageReset!==false&&(G.lastCombinedFilter||"")!==(B.currentFilters||[]).join("")){B.page=B.pageReset}}).bind("filterEnd.pager sortEnd.pager",function(){B.currentFilters=G.$table.data("lastSearch");if(B.initialized||B.initializing){if(G.delayInit&&G.rowsCopy&&G.rowsCopy.length===0){r(I)}u(I,B,false);d(I,B,false);G.$table.trigger("applyWidgets")}}).bind("disable.pager",function(K){K.stopPropagation();m(I,B)}).bind("enable.pager",function(K){K.stopPropagation();j(I,B,true)}).bind("destroy.pager",function(K){K.stopPropagation();z(I,B)}).bind("updateComplete.pager",function(N,M,K){N.stopPropagation();if(!M||K){return}var L=G.$tbodies.eq(0).children("tr").not(G.selectorRemove);B.totalRows=L.length-(B.countChildRows?0:L.filter("."+G.cssChildRow).length);B.totalPages=Math.ceil(B.totalRows/B.size);if(L.length&&G.rowsCopy&&G.rowsCopy.length===0){r(M)}if(B.page>=B.totalPages){l(M,B)}q(M,B);h(M,B);u(M,B,true)}).bind("pageSize.pager refreshComplete.pager",function(L,K){L.stopPropagation();e(I,parseInt(K,10)||B.settings.size||10,B);q(I,B);u(I,B,false)}).bind("pageSet.pager pagerUpdate.pager",function(L,K){L.stopPropagation();B.page=(parseInt(K,10)||1)-1;if(L.type==="pagerUpdate"){B.last.page=true}d(I,B,true);u(I,B,false)}).bind("pageAndSize.pager",function(M,L,K){M.stopPropagation();B.page=(parseInt(L,10)||1)-1;e(I,parseInt(K,10)||B.settings.size||10,B);d(I,B,true);q(I,B);u(I,B,false)});D=[B.cssFirst,B.cssPrev,B.cssNext,B.cssLast];F=[g,c,s,l];C.find(D.join(",")).attr("tabindex",0).unbind("click.pager").bind("click.pager",function(M){M.stopPropagation();var L,N=b(this),K=D.length;if(!N.hasClass(B.cssDisabled)){for(L=0;L<K;L++){if(N.is(D[L])){F[L](I,B);break}}}});B.$goto=C.find(B.cssGoto);if(B.$goto.length){B.$goto.unbind("change.pager").bind("change.pager",function(){B.page=b(this).val()-1;d(I,B,true);u(I,B,false)})}B.$size=C.find(B.cssPageSize);if(B.$size.length){B.$size.find("option").removeAttr("selected");B.$size.unbind("change.pager").bind("change.pager",function(){B.$size.val(b(this).val());if(!b(this).hasClass(B.cssDisabled)){e(I,parseInt(b(this).val(),10),B);h(I,B)}return false})}B.initialized=false;E.trigger("pagerBeforeInitialized",B);j(I,B,false);if(typeof(B.ajaxUrl)==="string"){B.ajax=true;G.widgetOptions.filter_serversideFiltering=true;G.serverSideSorting=true;d(I,B)}else{B.ajax=false;b(this).trigger("appendCache",true);w(I,B)}if(!B.ajax&&!B.initialized){B.initializing=false;B.initialized=true;d(I,B);b(I).trigger("pagerInitialized",B);if(!(G.widgetOptions.filter_initialized&&a.hasWidget(I,"filter"))){u(I,B,false)}}})}}()});a.showError=function(d,c){b(d).each(function(){var e,g=this.config,f=g.pager&&g.pager.cssErrorRow||g.widgetOptions.pager_css&&g.widgetOptions.pager_css.errorRow||"tablesorter-errorRow";if(g){if(typeof c==="undefined"){g.$table.find("thead").find(g.selectorRemove).remove()}else{e=(/tr\>/.test(c)?b(c):b('<tr><td colspan="'+g.columns+'">'+c+"</td></tr>")).click(function(){b(this).remove()}).appendTo(g.$table.find("thead:first")).addClass(f+" "+g.selectorRemove.slice(1)).attr({role:"alert","aria-live":"assertive"})}}})};b.fn.extend({tablesorterPager:b.tablesorterPager.construct})})(jQuery);